	<!doctype html>
<html>
	<head>
		<meta charset="utf-8">
		<meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">


		<title>Concourse CI</title>

		<link rel="stylesheet" href="css/reveal.css">
		<link rel="stylesheet" href="css/theme/solarized.css">

		<!-- Theme used for syntax highlighting of code -->
		<link rel="stylesheet" href="lib/css/zenburn.css">

		<!-- Printing and PDF exports -->
		<script>
			var link = document.createElement( 'link' );
			link.rel = 'stylesheet';
			link.type = 'text/css';
			link.href = window.location.search.match( /print-pdf/gi ) ? 'css/print/pdf.css' : 'css/print/paper.css';
			document.getElementsByTagName( 'head' )[0].appendChild( link );
		</script>

	</head>
	<body>
		<div class="reveal">
			<div class="slides">
				<section>
					<h1>Concourse CI</h1>
					<h2>DevOps Meetup Karlsruhe</h2>
					<img height="30%" width="30%" src="images/concourse-black.png" style="border: 0; box-shadow: none; opacity: 0.6" />
					<p style="font-size: 50%">image source: https://concourse-ci.org/trademarks.html</p>
				</section>
				<section data-markdown>
				    <script type="text/template">
					# Alexander MÃ¼ssig 
					## <a href="https://twitter.com/muehsi">@muehsi</a>
					</script>
				</section>
				<section data-markdown>
				    <script type="text/template">
					# Michael Lihs
					## <a href="https://twitter.com/kaktusmimi">@kaktusmimi</a>
					</script>
				</section>
				<section data-markdown>
				    <script type="text/template">
				        ## Agenda
				        - DevOps, CI/CD & all the buzz
				        - ...
				        - ...
				    </script>
				</section>

				<section data-markdown>
				    <script type="text/template">
				        # Four Key Metrics

				        ## 1. lead time
				        ## 2. deployment frequency
				        ## 3. mean time to restore
				        ## 4. change fail percentage

				        see <a href="https://www.thoughtworks.com/de/radar/techniques/four-key-metrics">ThoughtWorks Technology Radar - Four Key Metrics</a>
				    </script>
				</section>

				<section data-markdown>
				    <script type="text/template">
				        # Main Tasks of CI/CD

				        * automate things that (used to) hurt
				        * make building and delivering software more reliable
				        * let developers focus on features
				        * provide specific feedback (if things go wrong)
				    </script>
				</section>


                <section data-markdown>
                    <script type="text/template">
                        <h1 style="font-size: 600%">Pipelines that don't suck</h1>
                        source: [Build pipeline that don't suck](<https://github.com/sirech/talks/blob/master/2019-04-tw-build_pipelines.pdf>)
                    </script>
                </section>


				<section data-markdown>
					<script type="text/template">
						## A Good Pipeline is <i>code</i>
							
						* needs no modifications via UI
						* keep it close to the app (not sure about that, yet)
						* versioning
					</script>
				</section>

                <section data-markdown>
					<script type="text/template">
						## A good Pipeline is <i>maintainable</i>
						
						* declarative (?)
						* locally executable
						* easy to debug
					</script>
				</section>
				<section data-markdown>
					<script type="text/template">
						## A good Pipeline is <i>reliable</i>

						* isolated build (containers)
						* needs a tradeoff between isolation and speed
					</script>
				</section>
				<section data-markdown>
					<script type="text/template">
						## A good Pipeline is <i>fast</i>
						
						* throw hardware at the problem
						* parallelization
						* avoid repeating steps
						* make use of caching
                    </script>
				</section>
				<section data-markdown>
					<script type="text/template">
						## Good Pipelines are <i>visual</i>
						
						* avoid the <i>god step</i>
						* avoid logging overdose
						* visualize dependencies
					
					</script>
				</section>
				<section data-markdown>
					<script type="text/template">
						## Good Pipelines are <i>scalable</i>
						
						* find a tradeoff between reuse and coupling
						* follow a similar structure
						* parametrize steps
					</script>
				</section>

				<section data-markdown>
					<script type="text/template">
				        ## Operators' Whish List

				        * simple deployment
				          * containers
				          * configuration as code
				        * simple day 2 operations (updates, patches, backups)
				          * staging
				        * simple integration (CVEs, IAM, logging, monitoring)
				          * user / permission management
				          * web hooks
				        * scalability (build agents, high availability)
				          * customized build agents
				          * zero downtime upgrades
					</script>
				</section>


                <section data-markdown>
                    <script type="text/template">
                        <h1 style="font-size: 600%">How to Set Up Concourse</h1>
                    </script>
                </section>
								
				<section data-markdown>
					<script type="text/template">
						## Docker Compose
						

							$ wget <https://concourse-ci.org/docker-compose.yml>
							$ docker-compose up -d
							$ open <http://localhost:8080>
							# username & password: test/test
						
						## BOSH 
							$ bosh deploy -d concourse manifest.yml
					</script>
				</section>

				<section data-markdown>
					<script type="text/template">
						## What's BOSH?

						* ansible lacks of global view and patch management functionalities
						* deployment and lifecycle management tool
						* canary updates
						* monitoring and failure recovery
						* IaaS agnostic due to cloud provider interface (CPI)
						* opinionated way to deploy
						
					</script>
				</section>

				<section data-markdown>
					<script type="text/template">
						## Cloud Installer Tools
						* <b>Control Tower</b>: <i>The goal of Control Tower is to be the world's easiest way to deploy and operate Concourse CI in production</i> 
						
						* <b>BUCC</b>: <b>B</b>OSH, <b>U</b>AA, <b>C</b>oncourse, <b>C</b>redhub
						*  See 
							* <https://github.com/EngineerBetter/control-tower>
							* <https://github.com/starkandwayne/bucc>

						
					</script>
				</section>

                <section data-markdown>
                    <script type="text/template">
                        <h1 style="font-size: 600%">Concourse Overview</h1>
                    </script>
                </section>

                <section data-markdown>
                	<script type="text/template">
                        ## Concourse Architecture
                        * Concourse web
                        * Database
                        * Concourse Worker
                        * `fly` CLI
                        * <https://docs.pivotal.io/p-concourse/4-x/architecture.html>
                	</script>
                </section>

                <section>
					<img src="images/architecture-overview.png" style="border: none; box-shadow: none">
				</section>

                <section>
					<img src="images/architecture-fly.png" style="border: none; box-shadow: none">
				</section>

                <section>
					<img src="images/architecture-atc.png" style="border: none; box-shadow: none">
				</section>

                <section>
					<img src="images/architecture-db.png" style="border: none; box-shadow: none">
				</section>

                <section>
					<img src="images/architecture-tsa.png" style="border: none; box-shadow: none">
				</section>

                <section>
					<img src="images/architecture-beacon.png" style="border: none; box-shadow: none">
				</section>

                <section>
					<img src="images/architecture-garden.png" style="border: none; box-shadow: none">
				</section>

                <section>
					<img src="images/architecture-baggageclaim.png" style="border: none; box-shadow: none">
				</section>

				<section data-markdown>
                	<script type="text/template">
                        ## Some more details...
                        * EVERYTING runs in ~~Docker~~ containers
                          * resources as well as jobs
                        * Declarative (YAML) Pipelines
                        * Stateless build jobs
                          * no passing of artifacts inbetween jobs
                        * Connects to external systems instead of re-inventing them
                          * e.g. Vault (credentials management), LDAP (user management)
                        * No plugins but resources (more lightweight)
                        * Highly opinionated (take it or leave it)
                	</script>
                </section>



				<section data-markdown>
                	<script type="text/template">
                        ## Concourse Architecture
                        * Concourse web
                        * Database
                        * Concourse Worker
                        * `fly` CLI
                        * <https://docs.pivotal.io/p-concourse/4-x/architecture.html>
                	</script>
                </section>


				<section data-markdown>
					<script type="text/template">
						<h1 style="font-size: 600%">Basic Building Blocks</h1>
					</script>
				</section>


				<section data-markdown>
                	<script type="text/template">
						## Pipeline
						
						* Glue code for blocks below
                	</script>
                </section>
				
				
				<section data-markdown>
                	<script type="text/template">
						## Resources
						
						* artifacts used in the pipeline (inputs/outputs)
						* can be checked (for changes), pulled from and pushed to e.g., git, docker, artifactory, s3
						* see <https://concourse-ci.org/included-resources.html>
                	</script>
                </section>

				<section data-markdown>
					<script type="text/template">
						## Jobs

						* determine the action(s) of your pipeline
						* plan, which resource, which task, and in which order
						* you cannot pass anything between jobs
						* see <https://concourse-ci.org/jobs.html>
					</script>
				</section>
				

				<section data-markdown>
					<script type="text/template">
						## Tasks

						* smallest configurable unit in a Concourse pipeline
						* a function from inputs to outputs that can either succeed or fail
						* are combined to form a job in your pipeline
						* see <https://concourse-ci.org/tasks.html>
						* benefit of task.yml files
							* re-use
							* debugging without repiping (read from repo)
					
					</script>
				</section>


                <section data-markdown>
                    <script type="text/template">
                        <h1 style="font-size: 800%">Demo Time</h1>
                        see <a href="https://github.com/michaellihs/concourse-demo">github.com/michaellihs/concourse-demo</a>
                    </script>
                </section>


                <section data-markdown>
                    <script type="text/template">
                        <h1 style="font-size: 600%">Advanced Concepts</h1>
                    </script>
                </section>


                <section data-markdown>
                    <script type="text/template">
                        <h1 style="font-size: 800%">Recap</h1>
                    </script>
				</section>
				


				<section data-markdown>
					<script type="text/template">
						## A good pipeline is ...
						
						<table>
							<thead>
 								<tr>
									<th align="center">attribute</th>
									<th align="center">concourse</th>
									<th></th>
								</tr>
							</thead>
							<tbody>
								<tr>
									<td><i>code</i></td>
									<td><span class="fragment" data-fragment-index="1">all configuration in git</span></td>
									<td><span class="fragment" data-fragment-index="1">&#10004;</span></td>
								</tr>
								<tr>
									<td><i>maintainable</i></td>
									<td><span class="fragment" data-fragment-index="2">declarative but debugging experience required</span></td>
									<td><span class="fragment" data-fragment-index="2">&#10004;</span></td>
								</tr>
								<tr>
									<td><i>reliable</i></td>
									<td><span class="fragment" data-fragment-index="3">all resources are versioned, pinning to versions</span></td>
									<td><span class="fragment" data-fragment-index="3">&#10004;</span></td>
								</tr>
								<tr>
									<td><i>fast</i></td>
									<td><span class="fragment" data-fragment-index="4">caching of resources, adding workers easily</span></td>
									<td><span class="fragment" data-fragment-index="4">&#10004;</span></td>
								</tr>
								<tr>
									<td><i>visual</i></td>
									<td><span class="fragment" data-fragment-index="5">dependencies and failures visible</span></td>
									<td><span class="fragment" data-fragment-index="5">&#10004;</span></td>
								</tr>
								<tr>
									<td><i>scalable</i></td>
									<td><span class="fragment" data-fragment-index="6">reuse of resources and tasks</span></td>
									<td><span class="fragment" data-fragment-index="6">&#10004;</span></td>
								</tr>
							</tbody>
	</table>
					</script>
				</section>


                <section data-markdown>
                    <script type="text/template">
                        <h1 style="font-size: 600%">Downsides</h1>
                    </script>
                </section>


                <section data-markdown>
                    <script type="text/template">
                        <h1 style="font-size: 600%">Concourse vs Jenkins</h1>
                    </script>
                </section>


				<section data-markdown>
					<script type="text/template">
						<h1 style="font-size: 800%">Thank You!</h1>
					</script>
				</section>


				<section data-markdown>
					<script type="text/template">
						<h1 style="font-size: 800%">Questions</h1>
					</script>
				</section>


				<section data-markdown>
					<script type="text/template">
						## References

					</script>
				</section>

			</div>
		</div>

		<script src="lib/js/head.min.js"></script>
		<script src="js/reveal.js"></script>

		<script>
			// More info https://github.com/hakimel/reveal.js#configuration
			Reveal.initialize({
				history: true,

				// More info https://github.com/hakimel/reveal.js#dependencies
				dependencies: [
					{ src: 'plugin/markdown/marked.js' },
					{ src: 'plugin/markdown/markdown.js' },
					{ src: 'plugin/notes/notes.js', async: true },
					{ src: 'plugin/highlight/highlight.js', async: true, callback: function() { hljs.initHighlightingOnLoad(); } }
				]
			});
		</script>
	</body>
</html>
